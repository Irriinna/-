# **4. Сценарий оплаты и закрытия заказа**
**Цель:** Оплата заказа, чтобы закрыть заказ ![](https://bisbms.atlassian.net/rest/api/2/universal_avatar/view/type/issuetype/avatar/10307?size=medium)[PI9-21]() - Оплата заказа К выполнению 

## **<span style="color:#008DA6">Основная ветка:</span>**

1. Клиент оплачивает заказ курьеру **наличными деньгами (Альтернатива В.1.), (Альтернатива В.2.), (Исключение Г.1.) ![ref1][PI9-22]()** - Оплата заказа наличными В работе 
2. Курьер принимает оплату **наличными деньгами** (дает сдачу Клиенту)
3. Курьер делает отметку в приложении о факте оплаты
4.  Курьер выдает купон клиенту **(Исключение Г.2.)**
5. Курьер фиксирует в БД выдачу купона
6.  Система фиксирует факт выдачи купона
7.  Курьер возвращается в офис(ресторан)
8. Курьер делает отметку в приложении о возвращении в офис
9. Система фиксирует возвращение курьера в офис
10. Курьер сдает в кассу Менеджеру **наличные** по заказу
11. Курьер отмечает в приложении, что свободен
12. Система фиксирует освободившегося курьера
13. Менеджер **принимает наличные** по заказу
14. Менеджер отмечает в БД **приход денег** по заказу
15. Система фиксирует **приход наличных** по заказу
16. Менеджер отмечает в системе завершение заказа
17. Система уведомляет клиента об оплате и закрытии заказа

### **<span style="color:#008DA6">Альтернатива В.1. ![ref1][PI9-23]()</span>** - Оплата картой К выполнению 

1. Клиент оплачивает заказ курьеру **картой** 
2. Курьер принимает оплату **картой по терминалу мобильному**

* <span style="color:#008DA6"> шаги 3-9 основной ветки Сценария 4 </span>

10. Курьер сдает в кассу Менеджеру **чек об оплате через терминал мобильный**

* <span style="color:#008DA6"> шаги 11-12 основной ветки Сценария 4 </span>

13. Менеджер принимает **чек об оплате через терминал мобильный** по заказу
14. Менеджер отмечает в БД приход **чека** по заказу
15. Система фиксирует приход **безналичных/по карте** по заказу

* <span style="color:#008DA6"> шаги 16-17 основной ветки Сценария 4 </span>

